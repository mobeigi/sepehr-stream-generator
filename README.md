<p align="center">
<img src="https://i.imgur.com/rDPxW5y.png" height="110px" width="auto"/>
<br/>
<h3 align="center">Sepehr Stream Generator</h3>
<p align="center">Get latest stream links from Sepehr to produce working m3u file</p>
<h2></h2>
</p>
<br />

<p align="center">
<a href="../../issues"><img src="https://img.shields.io/github/issues/mobeigi/sepehr-stream-generator.svg?style=flat-square" /></a>
<a href="../../pulls"><img src="https://img.shields.io/github/issues-pr/mobeigi/sepehr-stream-generator.svg?style=flat-square" /></a> 
<a href="LICENSE.md"><img src="https://img.shields.io/github/license/mobeigi/sepehr-stream-generator.svg?style=flat-square" /></a>
</p>

## Description
Get latest stream links from Sepehr to produce working m3u file.  
I am using this alongside [Xteve](https://github.com/xteve-project/xTeVe) to get Sepehr live streams into Plex Live TV / DVR.

## Notes
* Each Sepehr M3U link is generated by a REST endpoint
* Returned stream urls contains a **s** (secret) parameter and **t** (time) parameter
  * The secret (s) is some encrypted key that ties the m3u stream link to your IP address. It will only be viewable from the IP which made the initial REST request.
  * It appears as if the time (t) is either the issue epoch or the epoch afterwhich the link will expire.
  * Both parameters are needed and must match for the stream to work.

## Instructions
1. Clone repo on a machine on your local network you intend to watch the stream on  
`git clone git@github.com:mobeigi/sepehr-stream-generator.git`
2. Set up pipenv environment  
`pipenv install`
3. Run the `sepehrstreamgenerator` module  
`pipenv run python -m sepehrstreamgenerator`
5. Check the output folder (`out`) for the created `sepehr.m3u` file
6. Setup a cron job to regenerate the `sepehr.m3u` file every 15 minutes so internal stream links remain valid

## Channel list 
#### 87 channels generated on 25/12/2023
Use `jq -r .channels[]."tvg-name"` with `data/channel-data.json` to generate this list.

* IRIB 1 (یک - HD)
* IRIB 2 (دو - HD)
* IRIB 3 (سه - HD)
* IRIB 4 (چهار)
* IRIB Nasim (نسیم - HD)
* IRIB IRINN (خبر - HD)
* IRIB Amouzesh (آموزش)
* IRIB Quran (قرآن)
* IRIB Mostanad (مستند - HD)
* IRIB Namayesh (نمایش - HD)
* IRIB Pouya (پویا - HD)
* IRIB Varzesh (ورزش - HD)
* IRIB Ofogh (افق)
* IRIB Salamat (سلامت)
* IRIB uhd (پیشران فراتر (4K))
* IRIB Omid (امید)
* IRIB Tamasha (تماشا - HD)
* IRIB 5 (تهران)
* IRIB Sepehr (سپهر)
* IRIB presstv (پرس تی وی - HD)
* IRIB alalam (العالم - HD)
* IRIB hausatvha (هوسا تی وی)
* IRIB iFilm (آی فیلم فارسی - HD)
* IRIB ifilmen (آی فیلم انگلیسی)
* IRIB ifilmdari (آی فیلم دری)
* IRIB filmarabic (آی فیلم عربی)
* IRIB sahar1 (سحر آذری)
* IRIB sahar2 (سحر اردو)
* IRIB sahar3 (سحر کردی)
* IRIB sahar4 (سحر بالکان)
* IRIB saharafghan (سحر افغانستان)
* IRIB alkosar (الکوثر)
* IRIB hispan (هیسپان)
* Jam-e-Jam 1 (Vienna) (جام جم 1)
* Jam-e-Jam 2 (North America) (جام جم ۲)
* Jam-e-Jam 3 (Asia/Australia) (جام جم 3)
* IRIB abadan (آبادان)
* IRIB azarbayjan (آذربایجان غربی)
* IRIB sahand (سهند)
* IRIB alborz (البرز)
* IRIB esfahan (اصفهان)
* IRIB sabalan (سبلان)
* IRIB ilam (ایلام)
* IRIB bushehr (بوشهر)
* IRIB jahanbin (جهان بین)
* IRIB khorasanjonoobi (خراسان جنوبی)
* IRIB khorasanrazavi (خراسان رضوی)
* IRIB khorasanshomali (خراسان شمالی - اترک)
* IRIB khalijefars (خلیج فارس)
* IRIB khoozestan (خوزستان)
* IRIB eshragh (اشراق)
* IRIB semnan (سمنان)
* IRIB hamoon (هامون)
* IRIB fars (فارس)
* IRIB qazvin (قزوین)
* IRIB noor (نور)
* IRIB kordestan (کردستان)
* IRIB kerman (کرمان)
* IRIB kermanshah (کرمانشاه)
* IRIB dena (دنا)
* IRIB kish (کیش)
* IRIB golestan (گلستان)
* IRIB baran (باران)
* IRIB aflak (افلاک)
* IRIB taban (یزد)
* IRIB mazandaran (مازندران)
* IRIB aftab (آفتاب)
* IRIB mahabad (مهاباد)
* IRIB hamedan (همدان)
* IRIB Javaneh (مثبت پویا- HD)
* IRIB ara (آرا  - HD)
* IRIB Jam (جام  - HD)
* IRIB Nama (نما  - HD)
* IRIB Nava (نوا  - HD)
* IRIB labbaik (لبیک)
* IRIB Habib TV (حبیب)
* IRIB sarbedaran (سربداران)
* IRIB ayyam (ایام)
* IRIB razavi (رضوی)
* IRIB ketabnama (کتاب)
* IRIB rooyatv (رویا)
* IRIB alalam-syria (العالم سوریه)
* IRIB irinn2 (خبر ۲)
* IRIB palestine (فلسطین)
* IRIB namaquran (نما قرآن)
* IRIB mirastv (میراث)
* IRIB hausatvra (رادیو هوسا)
* IRIB TehranUniversity (دانشگاه تهران)

## Contributions
Contributions are always welcome!
Just make a [pull request](../../pulls).

## Licence
GNU General Public License v3.0
